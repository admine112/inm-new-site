#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—å–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç–µ–º

HOST="is501201.ftp.tools"
USER="is501201"
PASS="aP9ypC9buY"
DB_HOST="is501201.mysql.ukraine.com.ua"
DB_USER="is501201_inm"
DB_PASS="(!keSB72a5"
DB_NAME="is501201_inm"

echo "üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—å–∏ '–°–æ—Å—Ç–∞–≤ –ò–Ω–º—É–Ω–æ—Ñ–ª–∞–º–∞'..."
echo ""

# –ó–∞–≥—Ä—É–∑–∫–∞ SQL —Ñ–∞–π–ª–∞ –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
echo "üì§ –ó–∞–≥—Ä—É–∑–∫–∞ SQL —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä..."
sshpass -p "${PASS}" scp -o StrictHostKeyChecking=no \
    SEO_Phase2_Complete/update_sostav_complete.sql \
    "${USER}@${HOST}:~/"

if [ $? -eq 0 ]; then
    echo "‚úÖ SQL —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"
    exit 1
fi

echo ""
echo "üíæ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö..."

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
sshpass -p "${PASS}" ssh -o StrictHostKeyChecking=no "${USER}@${HOST}" << ENDSSH
mysql -h ${DB_HOST} -u ${DB_USER} -p'${DB_PASS}' ${DB_NAME} < ~/update_sostav_complete.sql
if [ \$? -eq 0 ]; then
    echo "‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∞"
    rm ~/update_sostav_complete.sql
else
    echo "‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
    exit 1
fi
ENDSSH

echo ""
echo "‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo ""
echo "üìã –û–±–Ω–æ–≤–ª–µ–Ω–æ:"
echo "   - Title: –ò–Ω–º—É–Ω–æ—Ñ–ª–∞–º: –º–æ—â–Ω–∞—è –ø—Ä–∏—Ä–æ–¥–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¢-–∫–ª–µ—Ç–æ—á–Ω–æ–≥–æ –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞..."
echo "   - Description: –ò–Ω–º—É–Ω–æ—Ñ–ª–∞–º ‚Äî —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –∏–º–º—É–Ω–æ–º–æ–¥—É–ª—è—Ç–æ—Ä —Å –±–æ–ª–µ–µ —á–µ–º 70..."
echo "   - H1: –ß–¢–û –°–û–ë–û–ô –ü–†–ï–î–°–¢–ê–í–õ–Ø–ï–¢ –ò–ù–ú–£–ù–û–§–õ–ê–ú"
echo "   - –ü–æ–ª–Ω—ã–π HTML –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏"
echo ""
