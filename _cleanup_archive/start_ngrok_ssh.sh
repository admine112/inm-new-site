#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ ngrok SSH —Ç—É–Ω–Ω–µ–ª—è
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./start_ngrok_ssh.sh

echo "========================================="
echo "–ó–∞–ø—É—Å–∫ ngrok SSH —Ç—É–Ω–Ω–µ–ª—è"
echo "========================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ngrok
if ! command -v ngrok &> /dev/null; then
    echo "‚ùå ngrok –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH
if ! systemctl is-active --quiet ssh; then
    echo "‚ö†Ô∏è  SSH —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å–∫–∞—é..."
    sudo systemctl start ssh
fi

echo "‚úÖ SSH —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç"
echo ""
echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é ngrok —Ç—É–Ω–Ω–µ–ª—å..."
echo ""
echo "–í–ê–ñ–ù–û:"
echo "1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å –≤–∏–¥–∞: tcp://0.tcp.ngrok.io:12345"
echo "2. –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π: ssh linuxuser@0.tcp.ngrok.io -p 12345"
echo "3. –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"
echo ""
echo "========================================="
echo ""

# –ó–∞–ø—É—Å–∫ ngrok
ngrok tcp 22
